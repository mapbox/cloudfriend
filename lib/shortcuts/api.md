<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Lambda][1]
    -   [Parameters][2]
    -   [Properties][3]
    -   [Examples][4]
-   [ScheduledLambda][5]
    -   [Parameters][6]
    -   [Examples][7]
-   [QueueLambda][8]
    -   [Parameters][9]
    -   [Examples][10]
-   [StreamLambda][11]
    -   [Parameters][12]
    -   [Examples][13]
-   [ServiceRole][14]
    -   [Parameters][15]
    -   [Properties][16]
    -   [Examples][17]
-   [Queue][18]
    -   [Parameters][19]
    -   [Properties][20]
    -   [Examples][21]

## Lambda

Baseline CloudFormation resources involved in a Lambda Function. Includes a
LogGroup, a Role, an Alarm on function errors, and the Lambda Function itself.

### Parameters

-   `options` **[Object][22]** configuration options for the Lambda function, its
    IAM role, and the error Alarm. (optional, default `{}`)
    -   `options.LogicalName` **[String][23]** the logical name of the Lambda function
        within the CloudFormation template. This is used to construct the logical
        names of the other resources, as well as the Lambda function's name.
    -   `options.Code` **[Object][22]** See [AWS documentation][24]
    -   `options.DeadLetterConfig` **[Object][22]** See [AWS documentation][25] (optional, default `undefined`)
    -   `options.Description` **[String][23]** See [AWS documentation][26] (optional, default `'${logical name} in the ${stack name} stack'`)
    -   `options.Environment` **[Object][22]** See [AWS documentation][27] (optional, default `undefined`)
    -   `options.FunctionName` **[String][23]** See [AWS documentation][28] (optional, default `'${stack name}-${logical name}'`)
    -   `options.Handler` **[String][23]** See [AWS documentation][29] (optional, default `'index.handler'`)
    -   `options.KmsKeyArn` **[String][23]** See [AWS documentation][30] (optional, default `undefined`)
    -   `options.MemorySize` **[Number][31]** See [AWS documentation][32] (optional, default `128`)
    -   `options.ReservedConcurrentExecutions` **[Number][31]** See [AWS documentation][33] (optional, default `undefined`)
    -   `options.Runtime` **[String][23]** See [AWS documentation][34] (optional, default `'nodejs8.10'`)
    -   `options.Tags` **[Array][35]&lt;[Object][22]>** See [AWS documentation][36] (optional, default `undefined`)
    -   `options.Timeout` **[Number][31]** See [AWS documentation][37] (optional, default `300`)
    -   `options.TracingConfig` **[Object][22]** See [AWS documentation][38] (optional, default `undefined`)
    -   `options.VpcConfig` **[Object][22]** See [AWS documentation][39] (optional, default `undefined`)
    -   `options.Condition` **[String][23]** if there is a Condition defined in the template
        that should control whether or not to create this Lambda function, specify
        the name of the condition here. See [AWS documentation][40] (optional, default `undefined`)
    -   `options.Statement` **[Array][35]&lt;[Object][22]>** an array of policy statements
        defining the permissions that your Lambda function needs in order to execute. (optional, default `[]`)
    -   `options.AlarmName` **[String][23]** See [AWS documentation][41] (optional, default `'${stack name}-${logical name}-Errors'`)
    -   `options.AlarmDescription` **[String][23]** See [AWS documentation][42] (optional, default `'Error alarm for ${stack name}-${logical name} lambda function in ${stack name} stack'`)
    -   `options.AlarmActions` **[Array][35]&lt;[String][23]>** See [AWS documentation][43] (optional, default `[]`)
    -   `options.Period` **[Number][31]** See [AWS documentation][44] (optional, default `60`)
    -   `options.EvaluationPeriods` **[Number][31]** See [AWS documentation][45] (optional, default `1`)
    -   `options.Statistic` **[String][23]** See [AWS documentation][46] (optional, default `'Sum'`)
    -   `options.Threshold` **[Number][31]** See [AWS documentation][47] (optional, default `0`)
    -   `options.ComparisonOperator` **[String][23]** See [AWS documentation][48] (optional, default `'GreaterThanThreshold'`)
    -   `options.TreatMissingData` **[String][23]** See [AWS documentation][49] (optional, default `'notBreaching'`)
    -   `options.EvaluateLowSampleCountPercentile` **[String][23]** See [AWS documentation][50] (optional, default `undefined`)
    -   `options.OKActions` **[Array][35]&lt;[String][23]>** See [AWS documentation][51] (optional, default `undefined`)

### Properties

-   `Resources` **[Object][22]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.Lambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  }
});

module.exports = cf.merge(myTemplate, lambda);
```

## ScheduledLambda

**Extends Lambda**

A Lambda function that executes on a schedule. Includes a LogGroup, a Role,
an Alarm on function errors, a CloudWatch Event Rule, and a Lambda permission.

### Parameters

-   `options` **[Object][22]** configuration options for the scheduled Lambda
    function and related resources. Extends [the `options` for a vanilla Lambda
    function][2] with the following additional attributes: (optional, default `{}`)
    -   `options.ScheduleExpression` **[String][23]** See [AWS documentation][52]
    -   `options.State` **[String][23]** See [AWS documentation][53] (optional, default `'ENABLED'`)

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.ScheduledLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  ScheduleExpression: 'rate(1 hour)'
});

module.exports = cf.merge(myTemplate, lambda);
```

## QueueLambda

**Extends Lambda**

A Lambda function that executes in response to messages in an SQS queue.
Includes a LogGroup, a Role, an Alarm on function errors, and an event source
mapping.

### Parameters

-   `options` **[Object][22]** configuration options for the scheduled Lambda
    function and related resources. Extends [the `options` for a vanilla Lambda
    function][2] with the following additional attributes: (optional, default `{}`)
    -   `options.BatchSize` **[Number][31]** See [AWS documentation][54] (optional, default `1`)
    -   `options.EventSourceArn` **[String][23]** See [AWS documentation][55]
    -   `options.ReservedConcurrentExecutions` **[Number][31]** See [AWS documentation][33]

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.QueueLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  EventSourceArn: cf.getAtt('MyQueue', 'Arn'),
  ReservedConcurrentExecutions: 30
});

module.exports = cf.merge(myTemplate, lambda);
```

## StreamLambda

**Extends Lambda**

A Lambda function that executes in response to events in a DynamoDB or Kinesis
stream. Includes a LogGroup, a Role, an Alarm on function errors, and an event
source mapping.

### Parameters

-   `options` **[Object][22]** configuration options for the scheduled Lambda
    function and related resources. Extends [the `options` for a vanilla Lambda
    function][2] with the following additional attributes: (optional, default `{}`)
    -   `options.EventSourceArn` **[String][23]** See [AWS documentation][55]
    -   `options.BatchSize` **[Number][31]** See [AWS documentation][54] (optional, default `1`)
    -   `options.Enabled` **[Boolean][56]** See [AWS documentation][57] (optional, default `true`)
    -   `options.StartingPosition` **[String][23]** See [AWS documentation][58] (optional, default `'LATEST'`)

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.StreamLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  EventSourceArn: cf.getAtt('MyStream', 'Arn')
});

module.exports = cf.merge(myTemplate, lambda);
```

## ServiceRole

Create an IAM role that will be assumed by an AWS service, e.g. Lambda or ECS.

### Parameters

-   `options` **[Object][22]** configuration options for the IAM role. (optional, default `{}`)
    -   `options.LogicalName` **[String][23]** the logical name of the IAM role
        within the CloudFormation template.
    -   `options.Service` **[String][23]** the name of the AWS service that will assume this role, e.g. `lambda`
    -   `options.Statement` **[Array][35]&lt;[Object][22]>** an array of permissions statements
        to be included in the [PolicyDocument][59]. (optional, default `[]`)
    -   `options.ManagedPolicyArns` **[Array][35]&lt;[String][23]>** See [AWS documentation][60] (optional, default `undefined`)
    -   `options.MaxSessionDuration` **[Number][31]** See [AWS documentation][61] (optional, default `undefined`)
    -   `options.Path` **[String][23]** See [AWS documentation][62] (optional, default `undefined`)
    -   `options.RoleName` **[String][23]** See [AWS documentation][63] (optional, default `undefined`)
    -   `options.Condition` **[String][23]** if there is a Condition defined
        in the template that should control whether or not to create this IAM role,
        specify the name of the condition here. See [AWS documentation][40] (optional, default `undefined`)

### Properties

-   `Resources` **[Object][22]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const role = new cf.shortcuts.ServiceRole({
  LogicalName: 'MyRole',
  Service: 'lambda',
  Statement: [
    {
      Effect: 'Allow',
      Action: 's3:GetObject',
      Resource: 'arn:aws:s3:::my-bucket/my/data.tar.gz'
    }
  ]
});

module.exports = cf.merge(myTemplate, role);
```

## Queue

Creates an SQS queue that can be fed messages through an SNS topic. Creates
an SQS queue, SNS topic, dead-letter queue and policy allowing SNS events
to publish messages to the queue.

### Parameters

-   `options` **[Object][22]** configuration options for the SQS queue and related
    resources. (optional, default `{}`)
    -   `options.LogicalName` **[String][23]** the logical name of the SQS queue
        within the CloudFormation template. This is also used to construct the logical
        names of the other resources.
    -   `options.VisibilityTimeout` **[Number][31]** See [AWS documentation][64] (optional, default `300`)
    -   `options.maxReceiveCount` **[Number][31]** See [AWS documentation][65] (optional, default `10`)
    -   `options.ContentBasedDeduplication` **[Boolean][56]** See [AWS documentation][66] (optional, default `undefined`)
    -   `options.DelaySeconds` **[Number][31]** See [AWS documentation][67] (optional, default `undefined`)
    -   `options.FifoQueue` **[Boolean][56]** See [AWS documentation][68] (optional, default `undefined`)
    -   `options.KmsMasterKeyId` **[String][23]** See [AWS documentation][69] (optional, default `undefined`)
    -   `options.KmsDataKeyReusePeriodSeconds` **[Number][31]** See [AWS documentation][70] (optional, default `undefined`)
    -   `options.MaximumMessageSize` **[Number][31]** See [AWS documentation][71] (optional, default `undefined`)
    -   `options.MessageRetentionPeriod` **[Number][31]** See [AWS documentation][72] (optional, default `1209600`)
    -   `options.QueueName` **[String][23]** See [AWS documentation][73] (optional, default `'${stack name}-${logical name}'`)
    -   `options.ReceiveMessageWaitTimeSeconds` **[Number][31]** See [AWS documentation][74] (optional, default `undefined`)
    -   `options.Condition` **[String][23]** if there is a Condition defined
        in the template that should control whether or not to create this SQS queue,
        specify the name of the condition here. See [AWS documentation][40] (optional, default `undefined`)
    -   `options.TopicName` **[String][23]** See [AWS documentation][75] (optional, default `'${stack name}-${logical name}'`)
    -   `options.DisplayName` **[String][23]** See [AWS documentation][76] (optional, default `undefined`)
    -   `options.DeadLetterVisibilityTimeout` **[Number][31]** [VisibilityTimeout][64] for the dead-letter queue (optional, default `300`)

### Properties

-   `Resources` **[Object][22]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const queue = new cf.shortcuts.Queue({
  LogicalName: 'MyQueue'
});

module.exports = cf.merge(myTemplate, queue);
```

[1]: #lambda

[2]: #parameters

[3]: #properties

[4]: #examples

[5]: #scheduledlambda

[6]: #parameters-1

[7]: #examples-1

[8]: #queuelambda

[9]: #parameters-2

[10]: #examples-2

[11]: #streamlambda

[12]: #parameters-3

[13]: #examples-3

[14]: #servicerole

[15]: #parameters-4

[16]: #properties-1

[17]: #examples-4

[18]: #queue

[19]: #parameters-5

[20]: #properties-2

[21]: #examples-5

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[23]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[24]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-code.html

[25]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-deadletterconfig

[26]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-description

[27]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-environment

[28]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-functionname

[29]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-handler

[30]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-kmskeyarn

[31]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[32]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-memorysize

[33]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-reservedconcurrentexecutions

[34]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-runtime

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[36]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-tags

[37]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-timeout

[38]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-tracingconfig

[39]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-vpcconfig

[40]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html

[41]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmname

[42]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmdescription

[43]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmactions

[44]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-period

[45]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-evaluationperiods

[46]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-statistic

[47]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-threshold

[48]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-comparisonoperator

[49]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-treatmissingdata

[50]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-evaluatelowsamplecountpercentile

[51]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-okactions

[52]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html#cfn-events-rule-scheduleexpression

[53]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html#cfn-events-rule-state

[54]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-batchsize

[55]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-eventsourcearn

[56]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[57]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-enabled

[58]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-startingposition

[59]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-policy.html#cfn-iam-policies-policydocument

[60]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-managepolicyarns

[61]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-maxsessionduration

[62]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-path

[63]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-rolename

[64]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-visibilitytimeout

[65]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues-redrivepolicy.html#aws-sqs-queue-redrivepolicy-maxcount

[66]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#cfn-sqs-queue-contentbaseddeduplication

[67]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-delayseconds

[68]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#cfn-sqs-queue-fifoqueue

[69]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-kmsmasterkeyid

[70]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-kmsdatakeyreuseperiodseconds

[71]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-maxmsgsize

[72]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-msgretentionperiod

[73]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-name

[74]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-receivemsgwaittime

[75]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html#cfn-sns-topic-name

[76]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html#cfn-sns-topic-displayname
