<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Lambda][1]
    -   [Parameters][2]
    -   [Properties][3]
    -   [Examples][4]
-   [ScheduledLambda][5]
    -   [Parameters][6]
    -   [Examples][7]
-   [EventLambda][8]
    -   [Parameters][9]
    -   [Examples][10]
-   [QueueLambda][11]
    -   [Parameters][12]
    -   [Examples][13]
-   [StreamLambda][14]
    -   [Parameters][15]
    -   [Examples][16]
-   [Role][17]
    -   [Parameters][18]
    -   [Properties][19]
    -   [Examples][20]
-   [CrossAccountRole][21]
    -   [Parameters][22]
    -   [Properties][23]
    -   [Examples][24]
-   [ServiceRole][25]
    -   [Parameters][26]
    -   [Properties][27]
    -   [Examples][28]
-   [Queue][29]
    -   [Parameters][30]
    -   [Properties][31]
    -   [Examples][32]
-   [S3KinesisFirehose][33]
    -   [Parameters][34]
    -   [Properties][35]
    -   [Examples][36]
-   [KinesisFirehoseBase][37]
    -   [Parameters][38]
    -   [Properties][39]
-   [hookshot.Passthrough][40]
    -   [Parameters][41]
    -   [Properties][42]
    -   [Examples][43]
-   [hookshot.Github][44]
    -   [Parameters][45]
    -   [Properties][46]
    -   [Examples][47]
-   [LogSubscriptionLambda][48]
    -   [Parameters][49]
    -   [Examples][50]

## Lambda

Baseline CloudFormation resources involved in a Lambda Function. Includes a
LogGroup, a Role, an Alarm on function errors, and the Lambda Function itself.

### Parameters

-   `options` **[Object][51]** configuration options for the Lambda function, its
    IAM role, and the error Alarm. (optional, default `{}`)
    -   `options.LogicalName` **[String][52]** the logical name of the Lambda function
        within the CloudFormation template. This is used to construct the logical
        names of the other resources, as well as the Lambda function's name.
    -   `options.Code` **[Object][51]** See [AWS documentation][53]
    -   `options.DeadLetterConfig` **[Object][51]** See [AWS documentation][54] (optional, default `undefined`)
    -   `options.Description` **[String][52]** See [AWS documentation][55] (optional, default `'${logical name} in the ${stack name} stack'`)
    -   `options.Environment` **[Object][51]** See [AWS documentation][56] (optional, default `undefined`)
    -   `options.FunctionName` **[String][52]** See [AWS documentation][57] (optional, default `'${stack name}-${logical name}'`)
    -   `options.Handler` **[String][52]** See [AWS documentation][58] (optional, default `'index.handler'`)
    -   `options.KmsKeyArn` **[String][52]** See [AWS documentation][59] (optional, default `undefined`)
    -   `options.Layers` **[Array][60]&lt;[String][52]>** See [AWS documentation][61] (optional, default `undefined`)
    -   `options.MemorySize` **[Number][62]** See [AWS documentation][63] (optional, default `128`)
    -   `options.ReservedConcurrentExecutions` **[Number][62]** See [AWS documentation][64] (optional, default `undefined`)
    -   `options.Runtime` **[String][52]** See [AWS documentation][65] (optional, default `'nodejs8.10'`)
    -   `options.Tags` **[Array][60]&lt;[Object][51]>** See [AWS documentation][66] (optional, default `undefined`)
    -   `options.Timeout` **[Number][62]** See [AWS documentation][67] (optional, default `300`)
    -   `options.TracingConfig` **[Object][51]** See [AWS documentation][68] (optional, default `undefined`)
    -   `options.VpcConfig` **[Object][51]** See [AWS documentation][69] (optional, default `undefined`)
    -   `options.Condition` **[String][52]** if there is a Condition defined in the template
        that should control whether or not to create this Lambda function, specify
        the name of the condition here. See [AWS documentation][70] (optional, default `undefined`)
    -   `options.DependsOn` **[String][52]** Specify a stack resource dependency
        to this Lambda function. See [AWS documentation][71] (optional, default `undefined`)
    -   `options.Statement` **[Array][60]&lt;[Object][51]>** an array of policy statements
        defining the permissions that your Lambda function needs in order to execute. (optional, default `[]`)
    -   `options.AlarmName` **[String][52]** See [AWS documentation][72] (optional, default `'${stack name}-${logical name}-Errors-${region}'`)
    -   `options.AlarmDescription` **[String][52]** See [AWS documentation][73] (optional, default `'Error alarm for ${stack name}-${logical name} lambda function in ${stack name} stack'`)
    -   `options.AlarmActions` **[Array][60]&lt;[String][52]>** See [AWS documentation][74] (optional, default `[]`)
    -   `options.Period` **[Number][62]** See [AWS documentation][75] (optional, default `60`)
    -   `options.EvaluationPeriods` **[Number][62]** See [AWS documentation][76] (optional, default `1`)
    -   `options.Statistic` **[String][52]** See [AWS documentation][77] (optional, default `'Sum'`)
    -   `options.Threshold` **[Number][62]** See [AWS documentation][78] (optional, default `0`)
    -   `options.ComparisonOperator` **[String][52]** See [AWS documentation][79] (optional, default `'GreaterThanThreshold'`)
    -   `options.TreatMissingData` **[String][52]** See [AWS documentation][80] (optional, default `'notBreaching'`)
    -   `options.EvaluateLowSampleCountPercentile` **[String][52]** See [AWS documentation][81] (optional, default `undefined`)
    -   `options.ExtendedStatistic` **[String][52]** See [AWS documentation][82]] (optional, default `undefined`)
    -   `options.OKActions` **[Array][60]&lt;[String][52]>** See [AWS documentation][83] (optional, default `undefined`)

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.Lambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  }
});

module.exports = cf.merge(myTemplate, lambda);
```

## ScheduledLambda

**Extends Lambda**

A Lambda function that executes on in response to a CloudWatch Event. Includes
a LogGroup, a Role, an Alarm on function errors, a CloudWatch Event Rule, and
a Lambda permission.

### Parameters

-   `options` **[Object][51]** configuration options for the event-driven Lambda
    function and related resources. Extends [the `options` for a vanilla Lambda
    function][2] with the following additional attributes: (optional, default `{}`)
    -   `options.ScheduleExpression` **[String][52]** See [AWS documentation][84]
    -   `options.State` **[String][52]** See [AWS documentation][85] (optional, default `'ENABLED'`)

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.ScheduledLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  ScheduleExpression: 'cron(45 * * * *)',
});

module.exports = cf.merge(myTemplate, lambda);
```

## EventLambda

**Extends Lambda**

A Lambda function that executes on a schedule. Includes a LogGroup, a Role,
an Alarm on function errors, a CloudWatch Event Rule, and a Lambda permission.

### Parameters

-   `options` **[Object][51]** configuration options for the scheduled Lambda
    function and related resources. Extends [the `options` for a vanilla Lambda
    function][2] with the following additional attributes: (optional, default `{}`)
    -   `options.EventPattern` **[String][52]** See [AWS documentation][86]
    -   `options.State` **[String][52]** See [AWS documentation][85] (optional, default `'ENABLED'`)

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.ScheduledLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  ScheduleExpression: 'rate(1 hour)'
});

module.exports = cf.merge(myTemplate, lambda);
```

## QueueLambda

**Extends Lambda**

A Lambda function that executes in response to messages in an SQS queue.
Includes a LogGroup, a Role, an Alarm on function errors, and an event source
mapping.

### Parameters

-   `options` **[Object][51]** configuration options for the scheduled Lambda
    function and related resources. Extends [the `options` for a vanilla Lambda
    function][2] with the following additional attributes: (optional, default `{}`)
    -   `options.BatchSize` **[Number][62]** See [AWS documentation][87] (optional, default `1`)
    -   `options.EventSourceArn` **[String][52]** See [AWS documentation][88]
    -   `options.ReservedConcurrentExecutions` **[Number][62]** See [AWS documentation][64]

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.QueueLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  EventSourceArn: cf.getAtt('MyQueue', 'Arn'),
  ReservedConcurrentExecutions: 30
});

module.exports = cf.merge(myTemplate, lambda);
```

## StreamLambda

**Extends Lambda**

A Lambda function that executes in response to events in a DynamoDB or Kinesis
stream. Includes a LogGroup, a Role, an Alarm on function errors, and an event
source mapping.

### Parameters

-   `options` **[Object][51]** configuration options for the stream Lambda
    function and related resources. Extends [the `options` for a vanilla Lambda
    function][2] with the following additional attributes: (optional, default `{}`)
    -   `options.EventSourceArn` **[String][52]** See [AWS documentation][88]
    -   `options.BatchSize` **[Number][62]** See [AWS documentation][87] (optional, default `1`)
    -   `options.MaximumBatchingWindowInSeconds` **[Number][62]** See [AWS documentation][89] (optional, default `undefined`)
    -   `options.Enabled` **[Boolean][90]** See [AWS documentation][91] (optional, default `true`)
    -   `options.StartingPosition` **[String][52]** See [AWS documentation][92] (optional, default `'LATEST'`)

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.StreamLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  EventSourceArn: cf.getAtt('MyStream', 'Arn')
});

module.exports = cf.merge(myTemplate, lambda);
```

## Role

Create an IAM role.

### Parameters

-   `options` **[Object][51]** configuration options for the IAM role. (optional, default `{}`)
    -   `options.LogicalName` **[String][52]** the logical name of the IAM role
        within the CloudFormation template.
    -   `options.AssumeRolePrincipals` **[Array][60]&lt;[Object][51]>** an array of [principal objects][93]
        defining entities able to assume this role. Will be included in the role's
        [AssumeRolePolicyDocument][94].
    -   `options.Statement` **[Array][60]&lt;[Object][51]>** an array of permissions statements
        to be included in the [PolicyDocument][95]. (optional, default `[]`)
    -   `options.ManagedPolicyArns` **[Array][60]&lt;[String][52]>** See [AWS documentation][96] (optional, default `undefined`)
    -   `options.MaxSessionDuration` **[Number][62]** See [AWS documentation][97] (optional, default `undefined`)
    -   `options.Path` **[String][52]** See [AWS documentation][98] (optional, default `undefined`)
    -   `options.RoleName` **[String][52]** See [AWS documentation][99] (optional, default `undefined`)
    -   `options.Condition` **[String][52]** if there is a Condition defined
        in the template that should control whether or not to create this IAM role,
        specify the name of the condition here. See [AWS documentation][70] (optional, default `undefined`)
    -   `options.DependsOn` **[String][52]** Specify a stack resource dependency
        to this IAM role. See [AWS documentation][71] (optional, default `undefined`)

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const role = new cf.shortcuts.Role({
  LogicalName: 'MyRole',
  AssumeRolePrincipals: [
    { Service: 'ec2.amazonaws.com' }
  ],
  Statement: [
    {
      Effect: 'Allow',
      Action: 's3:GetObject',
      Resource: 'arn:aws:s3:::my-bucket/my/data.tar.gz'
    }
  ]
});

module.exports = cf.merge(myTemplate, role);
```

## CrossAccountRole

**Extends Role**

Create an IAM role that will be assumed from another AWS Account.

### Parameters

-   `options` **[Object][51]** configuration options for the IAM role. Extends
    [the `options` for a vanilla IAM Role][15]. You do not need to provide
    an `AssumeRolePrincipals` object, but do need to include the following
    additional attributes: (optional, default `{}`)
    -   `options.Accounts` **[Array][60]&lt;([String][52] \| [Object][51])>** an array of accounts that can
        assume this IAM Role. These could be the account id (`123456789012`), the
        account ARN (`arn:aws:iam::123456789012:root`), or a CloudFormation intrinsic
        function object (`cf.sub('arn:aws:iam::${AccountIdParameter}:root')`).

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const role = new cf.shortcuts.CrossAccountRole({
  LogicalName: 'MyRole',
  Accounts: ['123456789012'],
  Statement: [
    {
      Effect: 'Allow',
      Action: 's3:GetObject',
      Resource: 'arn:aws:s3:::my-bucket/my/data.tar.gz'
    }
  ]
});

module.exports = cf.merge(myTemplate, role);
```

## ServiceRole

**Extends Role**

Create an IAM role that will be assumed by an AWS service, e.g. Lambda or ECS.

### Parameters

-   `options` **[Object][51]** configuration options for the IAM role. Extends
    [the `options` for a vanilla IAM Role][15]. You do not need to provide
    an `AssumeRolePrincipals` object, but do need to include the following
    additional attributes: (optional, default `{}`)
    -   `options.Service` **[String][52]** the name of the AWS service that will assume this role, e.g. `lambda`

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const role = new cf.shortcuts.ServiceRole({
  LogicalName: 'MyRole',
  Service: 'lambda',
  Statement: [
    {
      Effect: 'Allow',
      Action: 's3:GetObject',
      Resource: 'arn:aws:s3:::my-bucket/my/data.tar.gz'
    }
  ]
});

module.exports = cf.merge(myTemplate, role);
```

## Queue

Creates an SQS queue that can be fed messages through an SNS topic. Creates
an SQS queue and a dead-letter queue for it. Either creates a new SNS
topic that can be used for sending messages into the queue, or subscribes the queue
to an existing SNS topic provided with the `ExistingTopicArn` option.

### Parameters

-   `options` **[Object][51]** configuration options for the SQS queue and related
    resources. (optional, default `{}`)
    -   `options.LogicalName` **[String][52]** the logical name of the SQS queue
        within the CloudFormation template. This is also used to construct the logical
        names of the other resources.
    -   `options.VisibilityTimeout` **[Number][62]** See [AWS documentation][100] (optional, default `300`)
    -   `options.maxReceiveCount` **[Number][62]** See [AWS documentation][101] (optional, default `10`)
    -   `options.ContentBasedDeduplication` **[Boolean][90]** See [AWS documentation][102] (optional, default `undefined`)
    -   `options.DelaySeconds` **[Number][62]** See [AWS documentation][103] (optional, default `undefined`)
    -   `options.FifoQueue` **[Boolean][90]** See [AWS documentation][104] (optional, default `undefined`)
    -   `options.KmsMasterKeyId` **[String][52]** See [AWS documentation][105] (optional, default `undefined`)
    -   `options.KmsDataKeyReusePeriodSeconds` **[Number][62]** See [AWS documentation][106] (optional, default `undefined`)
    -   `options.MaximumMessageSize` **[Number][62]** See [AWS documentation][107] (optional, default `undefined`)
    -   `options.MessageRetentionPeriod` **[Number][62]** See [AWS documentation][108] (optional, default `1209600`)
    -   `options.QueueName` **[String][52]** See [AWS documentation][109] (optional, default `'${stack name}-${logical name}'`)
    -   `options.ReceiveMessageWaitTimeSeconds` **[Number][62]** See [AWS documentation][110] (optional, default `undefined`)
    -   `options.Condition` **[String][52]** if there is a Condition defined
        in the template that should control whether or not to create this SQS queue,
        specify the name of the condition here. See [AWS documentation][70] (optional, default `undefined`)
    -   `options.DependsOn` **[String][52]** Specify a stack resource dependency
        to this SQS queue. See [AWS documentation][71] (optional, default `undefined`)
    -   `options.ExistingTopicArn` **[String][52]?** Specify an SNS topic ARN to subscribe the queue to.
        If this option is provided, TopicName is irrelevant because no new topic is created.
    -   `options.TopicName` **[String][52]** See [AWS documentation][111] (optional, default `'${stack name}-${logical name}'`)
    -   `options.DisplayName` **[String][52]** See [AWS documentation][112] (optional, default `undefined`)
    -   `options.DeadLetterVisibilityTimeout` **[Number][62]** [VisibilityTimeout][100] for the dead-letter queue (optional, default `300`)

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const queue = new cf.shortcuts.Queue({
  LogicalName: 'MyQueue'
});

module.exports = cf.merge(myTemplate, queue);
```

## S3KinesisFirehose

**Extends KinesisFirehoseBase**

Creates a Kinesis Firehouse that can receive records by direct put or by consuming a Kinesis Stream
and writes out to the specific S3 destination. Creates a Kinesis Firehouse delivery stream,
sets up logging and creates a policy allowing records to be delivered to the delivery stream.
Also creates a CloudWatch alarm on the `DeliveryToS3.DataFreshness` metric -- the age
(from getting into Kinesis Data Firehose to now) of the oldest record in Kinesis Data Firehose.
By default, if that metric exceed double the `BufferingIntervalInSeconds`, the
alarm is triggered.

### Parameters

-   `options` **[Object][51]** configuration options for the Kinesis Firehouse delivery stream
    and related resources. (optional, default `{}`)
    -   `options.LogicalName` **[String][52]** the logical name of the Kinesis Firehouse delivery stream
        within the CloudFormation template. This is also used to construct the logical
        names of the other resources.
    -   `options.DestinationBucket` **[String][52]** the name of the S3 bucket to write to
    -   `options.Prefix` **[String][52]** the prefix path (folder) within the DestinationBucket to write to (optional, default `'raw/${logical name}/'`)
    -   `options.KinesisStreamARN` **([String][52] \| [Object][51])** a string or ref identifying a source Kinesis Stream (optional, default `undefined`)
    -   `options.BufferingIntervalInSeconds` **[Number][62]** See [AWS documentation][113] (optional, default `900`)
    -   `options.BufferingSizeInMBs` **[Number][62]** See [AWS documentation][114] (optional, default `128`)
    -   `options.AlarmName` **[String][52]** See [AWS documentation][72] (optional, default `'${stack name}-${logical name}-Freshness-${region}'`)
    -   `options.AlarmDescription` **[String][52]** See [AWS documentation][73] (optional, default `'Freshness alarm for ${stack name}-${logical name} kinesis firehose in ${stack name} stack'`)
    -   `options.AlarmActions` **[Array][60]&lt;[String][52]>** See [AWS documentation][74] (optional, default `[]`)
    -   `options.Period` **[Number][62]** See [AWS documentation][75] (optional, default `60`)
    -   `options.EvaluationPeriods` **[Number][62]** See [AWS documentation][76] (optional, default `1`)
    -   `options.Statistic` **[String][52]** See [AWS documentation][77] (optional, default `'Maximum'`)
    -   `options.Threshold` **[Number][62]** See [AWS documentation][78] (optional, default `(BufferingIntervalInSeconds*2)`)
    -   `options.ComparisonOperator` **[String][52]** See [AWS documentation][79] (optional, default `'GreaterThanThreshold'`)
    -   `options.TreatMissingData` **[String][52]** See [AWS documentation][80] (optional, default `'notBreaching'`)
    -   `options.EvaluateLowSampleCountPercentile` **[String][52]** See [AWS documentation][81] (optional, default `undefined`)
    -   `options.ExtendedStatistic` **[String][52]** See [AWS documentation][82]] (optional, default `undefined`)
    -   `options.OKActions` **[Array][60]&lt;[String][52]>** See [AWS documentation][83] (optional, default `undefined`)

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const firehose = new cf.shortcuts.S3KinesisFirehose({
  LogicalName: 'MyKinesisFirehose',
  DestinationBucket: 'mah-bukkit'
});

module.exports = cf.merge(myTemplate, firehose);
```

## KinesisFirehoseBase

Base class for creating a Kinesis Firehouse that can receive records
by direct put or by consuming a Kinesis Stream.
Each implementing subclass enables writing to a specific destination.
Creates a Kinesis Firehouse delivery stream, sets up logging and creates
a policy allowing records to be delivered to the delivery stream.

### Parameters

-   `options` **[Object][51]** configuration options for the Kinesis Firehouse delivery stream
    and related resources. (optional, default `{}`)
    -   `options.LogicalName` **[String][52]** the logical name of the Kinesis Firehouse delivery stream
        within the CloudFormation template. This is also used to construct the logical
        names of the other resources.
    -   `options.KinesisStreamARN` **([String][52] \| [Object][51])** a string or ref identifying a source Kinesis Stream (optional, default `undefined`)

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.

## hookshot.Passthrough

The hookshot.Passthrough class defines resources that set up a single API Gateway
endpoint that responds to POST and OPTIONS requests. You are expected to
provide a Lambda function that will receive the request, and return some
response to the caller.

Note that in this case, your Lambda function will receive every HTTP POST
request that arrives at the API Gateway URL that hookshot helped you create.
You are responsible for any authentication that should be performed against
incoming requests.

Your Lambda function will receive an event object which includes the request
method, headers, and body, as well as other data specific to the API Gateway
endpoint created by hookshot. See [AWS documentation here][115]
for a full description of the incoming data.

In order to work properly, **your lambda function must return a data object
matching in a specific JSON format**. Again, see [AWS documentation for a full description][116].

Your API Gateway endpoint will be set up to allow cross-origin resource
sharing (CORS) required by requests from any web page. Preflight `OPTIONS`
requests will receive a `200` response with CORS headers. And the response
you return from your Lambda function will be modified to include CORS headers.

### Parameters

-   `Prefix` **[String][52]** this will be used to prefix the set of CloudFormation
    resources created by this shortcut.
-   `PassthroughTo` **[String][52]** the logical name of the Lambda function that you
    have written which will receive a request and generate a response to provide
    to the caller.
-   `LoggingLevel` **[String][52]** one of `OFF`, `INFO`, or `ERROR`. Logs are delivered
    to a CloudWatch LogGroup named `API-Gateway-Execution-Logs_{rest-api-id}/hookshot` (optional, default `'OFF'`)
-   `DataTraceEnabled` **[Boolean][90]** set to `true` to enable full request/response
    logging in the API's execution logs. (optional, default `false`)
-   `MetricsEnabled` **[Boolean][90]** set to `true` to enable additional
    execution metrics in CloudWatch. (optional, default `false`)
-   `AccessLogFormat` **[String][52]?** A single line format of the access logs of
    data, as specified by selected $context variables. The format must include at
    least $context.requestId. [See AWS documentation for details][117].
-   `WebhookSecret` **([String][52] \| [Object][51])?** A secret string to be used to verify
    payload signatures that are delivered to the endpoint. This is optional. If
    not specified, a string will be autogenerated for you. Implementation of
    signature verification is up to the caller.

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.
-   `Outputs` **[Object][51]** the CloudFormation outputs created by this
    shortcut. This includes the URL for the API Gateway endpoint, and a random
    string that can be used as a shared secret if you so desire.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = {
  ...
  Resources: {
    MyLambdaFunction: {
      Type: 'AWS::Lambda::Function',
      Properties: { ... }
    }
  }
};

const webhook = new cf.shortcuts.hookshot.Passthrough({
  Prefix: 'Webhook',
  PassthroughTo: 'MyLambdaFunction'
});

module.exports = cf.merge(myTemplate, webhook);
```

## hookshot.Github

The hookshot.Github class defines resources that set up a single API Gateway
endpoint that is designed responds to POST requests sent from Github in
response to various Github events. The hookshot system will use a shared
secret to validate that the incoming payload did in fact originate from Github,
before sending the event payload to your Lambda function for further
processing. Any requests that did not come from Github or were not properly
signed using your secret key are rejected, and will never make it to your
Lambda function.

### Parameters

-   `Prefix` **[String][52]** this will be used to prefix the set of CloudFormation
    resources created by this shortcut.
-   `PassthroughTo` **[String][52]** the logical name of the Lambda function that you
    have written which will receive a request and generate a response to provide
    to the caller.
-   `LoggingLevel` **[String][52]** one of `OFF`, `INFO`, or `ERROR`. Logs are delivered
    to a CloudWatch LogGroup named `API-Gateway-Execution-Logs_{rest-api-id}/hookshot`
-   `WebhookSecret` **([String][52] \| [Object][51])?** A secret string to be used to verify
    payload signatures that are delivered to the endpoint. This is optional. If
    not specified, a string will be autogenerated for you. You should provide this
    value to Github, and signature verification will be performed prior to your
    Lambda function being invoked to respond to the event.

### Properties

-   `Resources` **[Object][51]** the CloudFormation resources created by this shortcut.
-   `Outputs` **[Object][51]** the CloudFormation outputs created by this
    shortcut. This includes the URL for the API Gateway endpoint, and a secret
    string. Use these two values to configure Github to send webhooks to your
    API Gateway endpoint.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = {
  ...
  Resources: {
    MyLambdaFunction: {
      Type: 'AWS::Lambda::Function',
      Properties: { ... }
    }
  }
};

const webhook = new cf.shortcuts.hookshot.Github({
  Prefix: 'Webhook',
  PassthroughTo: 'MyLambdaFunction'
});

module.exports = cf.merge(myTemplate, webhook);
```

## LogSubscriptionLambda

**Extends Lambda**

A Lambda function that executes in response to a log subscription filter.
Includes a LogGroup, a Role, an Alarm on function errors, a CloudWatch Subscription Filter,
and a Lambda permission.

### Parameters

-   `options` **[Object][51]** configuration options for the subscription filter Lambda
    function and related resources. Extends [the `options` for a vanilla Lambda
    function][2] with the following additional attributes: (optional, default `{}`)
    -   `options.FilterPattern` **[String][52]** See [AWS documentation][118] (optional, default `''`)
    -   `options.LogGroupName` **[String][52]** See [AWS documentation][119]

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.LogSubscriptionLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  LogGroupName: 'my-log-group'
});

module.exports = cf.merge(myTemplate, lambda);
```

[1]: #lambda

[2]: #parameters

[3]: #properties

[4]: #examples

[5]: #scheduledlambda

[6]: #parameters-1

[7]: #examples-1

[8]: #eventlambda

[9]: #parameters-2

[10]: #examples-2

[11]: #queuelambda

[12]: #parameters-3

[13]: #examples-3

[14]: #streamlambda

[15]: #parameters-4

[16]: #examples-4

[17]: #role

[18]: #parameters-5

[19]: #properties-1

[20]: #examples-5

[21]: #crossaccountrole

[22]: #parameters-6

[23]: #properties-2

[24]: #examples-6

[25]: #servicerole

[26]: #parameters-7

[27]: #properties-3

[28]: #examples-7

[29]: #queue

[30]: #parameters-8

[31]: #properties-4

[32]: #examples-8

[33]: #s3kinesisfirehose

[34]: #parameters-9

[35]: #properties-5

[36]: #examples-9

[37]: #kinesisfirehosebase

[38]: #parameters-10

[39]: #properties-6

[40]: #hookshotpassthrough

[41]: #parameters-11

[42]: #properties-7

[43]: #examples-10

[44]: #hookshotgithub

[45]: #parameters-12

[46]: #properties-8

[47]: #examples-11

[48]: #logsubscriptionlambda

[49]: #parameters-13

[50]: #examples-12

[51]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[52]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[53]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-code.html

[54]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-deadletterconfig

[55]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-description

[56]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-environment

[57]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-functionname

[58]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-handler

[59]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-kmskeyarn

[60]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[61]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-layers

[62]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[63]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-memorysize

[64]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-reservedconcurrentexecutions

[65]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-runtime

[66]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-tags

[67]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-timeout

[68]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-tracingconfig

[69]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-vpcconfig

[70]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html

[71]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html

[72]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmname

[73]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmdescription

[74]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmactions

[75]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-period

[76]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-evaluationperiods

[77]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-statistic

[78]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-threshold

[79]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-comparisonoperator

[80]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-treatmissingdata

[81]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-evaluatelowsamplecountpercentile

[82]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-extendedstatistic

[83]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-okactions

[84]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html#cfn-events-rule-scheduleexpression

[85]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html#cfn-events-rule-state

[86]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html#cfn-events-rule-eventpattern

[87]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-batchsize

[88]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-eventsourcearn

[89]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-maximumbatchingwindowinseconds

[90]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[91]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-enabled

[92]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-startingposition

[93]: https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html

[94]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html?shortFooter=true#cfn-iam-role-assumerolepolicydocument

[95]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-policy.html#cfn-iam-policies-policydocument

[96]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-managepolicyarns

[97]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-maxsessionduration

[98]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-path

[99]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html#cfn-iam-role-rolename

[100]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-visibilitytimeout

[101]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues-redrivepolicy.html#aws-sqs-queue-redrivepolicy-maxcount

[102]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#cfn-sqs-queue-contentbaseddeduplication

[103]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-delayseconds

[104]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#cfn-sqs-queue-fifoqueue

[105]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-kmsmasterkeyid

[106]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-kmsdatakeyreuseperiodseconds

[107]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-maxmsgsize

[108]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-msgretentionperiod

[109]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-name

[110]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html#aws-sqs-queue-receivemsgwaittime

[111]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html#cfn-sns-topic-name

[112]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html#cfn-sns-topic-displayname

[113]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-kinesisfirehose-deliverystream-bufferinghints.html#cfn-kinesisfirehose-deliverystream-bufferinghints-intervalinseconds

[114]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-kinesisfirehose-deliverystream-bufferinghints.html#cfn-kinesisfirehose-deliverystream-bufferinghints-sizeinmbs

[115]: https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-proxy-integrations.html#api-gateway-simple-proxy-for-lambda-input-format

[116]: https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-proxy-integrations.html#api-gateway-simple-proxy-for-lambda-output-format

[117]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-apigateway-stage-accesslogsetting.html#cfn-apigateway-stage-accesslogsetting-format

[118]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-logs-subscriptionfilter.html#cfn-cwl-subscriptionfilter-filterpattern

[119]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-logs-subscriptionfilter.html#cfn-cwl-subscriptionfilter-loggroupname
